<Sql TableName="MigrationMySQL" CustomScript="#CDATA">
    <CDATA name="CustomScript"><![CDATA[--[mssql: Skip]
--[mysql: Native]

set @sql = (SELECT IF(
    (SELECT COUNT(*)
        FROM INFORMATION_SCHEMA.TABLES 
        WHERE table_name='DocuSignAccount'
    ) > 0,
    "  INSERT INTO ESignAccount (CompanyID, AccountID, AccountCD, IsActive, Type, ApiUrl, SendReminders, FirstReminderDay, ReminderFrequency, ExpiredDays, WarnDays, OwnerID, CreatedByID, CreatedByScreenID, CreatedDateTime, LastModifiedByID, LastModifiedByScreenID, LastModifiedDateTime, IsTestApi, Email, Password, ReminderType, ProviderType, Status)
    SELECT
      CompanyID,
      AccountID,
      AccountCD,
      Active,
      Type,
      ApiUrl,
      SendReminders,
      FirstReminderDay,
      ReminderFrequency,
      ExpiredDays,
      WarnDays,
      OwnerID,
      CreatedByID,
      CreatedByScreenID,
      CreatedDateTime,
      LastModifiedByID,
      LastModifiedByScreenID,
      LastModifiedDateTime,
      IsTestApi,
      Email,
      Password,
      'DAILY_UNTIL_SIGNED',
      'D',
      'Connected'
    FROM DocuSignAccount
    WHERE NOT EXISTS (SELECT
      1
    FROM ESignAccount
    WHERE DocuSignAccount.CompanyID = ESignAccount.CompanyID
    AND DocuSignAccount.AccountID = ESignAccount.AccountID)",
    "SELECT 0"
));
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

set @sql = (SELECT IF(
    (SELECT COUNT(*)
        FROM INFORMATION_SCHEMA.TABLES 
        WHERE table_name='DocuSignEnvelopeInfo'
    ) > 0,
    "  INSERT INTO ESignEnvelopeInfo (CompanyID, EnvelopeInfoID, CompletedFileName, CompletedFileID, FileID, FileRevisionID, EnvelopeID, LastStatus, ActivityDate, ExpirationDate, ESignAccountID, Theme, MessageBody, SendReminders, IsOrder, FirstReminderDay, ReminderFrequency, ExpiredDays, WarnDays, IsFinalVersion, SendDate, CreatedByID, CreatedByScreenID, CreatedDateTime, LastModifiedByID, LastModifiedByScreenID, LastModifiedDateTime, ReminderType)
    SELECT
      CompanyID,
      EnvelopeInfoID,
      CompletedFileName,
      CompletedFileID,
      FileID,
      FileRevisionID,
      EnvelopeID,
      LastStatus,
      ActivityDate,
      ExpirationDate,
      DocuSignAccountID,
      Theme,
      MessageBody,
      SendReminders,
      IsOrder,
      FirstReminderDay,
      ReminderFrequency,
      ExpiredDays,
      WarnDays,
      IsFinalVersion,
      SendDate,
      CreatedByID,
      CreatedByScreenID,
      CreatedDateTime,
      LastModifiedByID,
      LastModifiedByScreenID,
      LastModifiedDateTime,
      'DAILY_UNTIL_SIGNED'
    FROM DocuSignEnvelopeInfo
    WHERE NOT EXISTS (SELECT
      1
    FROM ESignEnvelopeInfo
    WHERE DocuSignEnvelopeInfo.CompanyID = ESignEnvelopeInfo.CompanyID
    AND DocuSignEnvelopeInfo.EnvelopeInfoID = ESignEnvelopeInfo.EnvelopeInfoID)",
    "SELECT 0"
));
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

set @sql = (SELECT IF(
    (SELECT COUNT(*)
        FROM INFORMATION_SCHEMA.TABLES 
        WHERE table_name='DocuSignAccountUserRule'
    ) > 0,
    "  INSERT INTO ESignAccountUserRule (CompanyID, AccountID, OwnerID, CreatedByID, CreatedByScreenID, CreatedDateTime, LastModifiedByID, LastModifiedByScreenID, LastModifiedDateTime)
    SELECT
      CompanyID,
      AccountID,
      OwnerID,
      CreatedByID,
      CreatedByScreenID,
      CreatedDateTime,
      LastModifiedByID,
      LastModifiedByScreenID,
      LastModifiedDateTime
    FROM DocuSignAccountUserRule
    WHERE NOT EXISTS (SELECT
      1
    FROM ESignAccountUserRule
    WHERE DocuSignAccountUserRule.CompanyID = ESignAccountUserRule.CompanyID
    AND DocuSignAccountUserRule.AccountID = ESignAccountUserRule.AccountID
    AND DocuSignAccountUserRule.OwnerID = ESignAccountUserRule.OwnerID)",
    "SELECT 0"
));
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

set @sql = (SELECT IF(
    (SELECT COUNT(*)
        FROM INFORMATION_SCHEMA.TABLES 
        WHERE table_name='DocuSignRecipient'
    ) > 0,
    "  INSERT INTO ESignRecipient (CompanyID, RecipientID, EnvelopeInfoID, Email, Name, Position, CustomMessage, Type, Status, SignedDateTime, DeliveredDateTime, CreatedByID, CreatedByScreenID, CreatedDateTime, LastModifiedByID, LastModifiedByScreenID, LastModifiedDateTime)
    SELECT
      CompanyID,
      RecipientID,
      EnvelopeInfoID,
      Email,
      Name,
      Position,
      CustomMessage,
      Type,
      Status,
      SignedDateTime,
      DeliveredDateTime,
      CreatedByID,
      CreatedByScreenID,
      CreatedDateTime,
      LastModifiedByID,
      LastModifiedByScreenID,
      LastModifiedDateTime
    FROM DocuSignRecipient
    WHERE NOT EXISTS (SELECT
      1
    FROM ESignRecipient
    WHERE DocuSignRecipient.CompanyID = ESignRecipient.CompanyID
    AND DocuSignRecipient.RecipientID = ESignRecipient.RecipientID)",
    "SELECT 0"
));
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;]]></CDATA>
</Sql>